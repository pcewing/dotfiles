#!/bin/sh

# This file is sourced from .xsession so it needs to be POSIX compliant.

export DOTFILES="$HOME/dot"

is_in_path() {
    case ":$PATH:" in
        *":$1:"*) return 0 ;;
        *)        return 1 ;;
    esac
}

add_to_path() {
    PATH=$1${PATH:+":$PATH"}
    export PATH
}

# TODO: Should we only add to path if the directory exists? Could make it an optional argument.
try_add_to_path() {
    is_in_path "$1" || add_to_path "$1"
}

try_add_to_path "/usr/local/bin"
try_add_to_path "/usr/local/sbin"
try_add_to_path "$HOME/bin"
try_add_to_path "$HOME/.flatpak_aliases"
try_add_to_path "$HOME/.local/bin"
try_add_to_path "$DOTFILES/bin"
try_add_to_path "$HOME/.rvm/bin"
try_add_to_path "$HOME/.npm-global/bin"
try_add_to_path "/usr/local/go/bin"
try_add_to_path "$HOME/go/bin"
try_add_to_path "$HOME/go"
try_add_to_path "$HOME/.mix/escripts"
try_add_to_path "$HOME/box/bin"

if [ -n "${WSL_DISTRO_NAME-}" ]; then
    try_add_to_path "/mnt/c/bin"
fi

# Nix (single-user) - load Nix profile into PATH
if [ -r "$HOME/.nix-profile/etc/profile.d/nix.sh" ]; then
  . "$HOME/.nix-profile/etc/profile.d/nix.sh"
fi
